<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:b="http://bootsfaces.net/ui">

<ui:composition template="templateusu.xhtml">
	<ui:define name="titulo">
            Subastas
        </ui:define>
	<ui:define name="contenido">
		<h:form>
			<center>
				<h1>SUBASTAS YACHAY</h1>
			</center>
		</h:form>
		<br />
		<h:form id="frm">
			<p:growl id="messages" showDetail="false" />
			<p:layout style="min-height:600px;">
				<p:layoutUnit position="center" size="500">
					<p:dataScroller var="item" value="#{ofertausuBean.listaItems}"
						chunkSize="10"
						paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
						rowsPerPageTemplate="6,12,16">

						<f:facet name="loader">
							<p:commandButton type="button" value="Mas"
								icon="ui-icon-circle-triangle-s" />
						</f:facet>

						<h:panelGrid columns="3" style="width:100%"
							columnClasses="Imagen,detalle,ofertar">
							<p:graphicImage value="#{facesContex}/imgevent/300.jpg"
								width="150" height="150" />

							<p:outputPanel>
								<h:panelGrid columns="2" cellpadding="5">
									<h:outputText value="Nombre: " style="font-weight: bold" />
									<h:outputText value="#{item.itemNombre}"></h:outputText>

									<h:outputText value="Valor Base: " style="font-weight: bold" />
									<h:outputText value="#{item.itemValorBase}"></h:outputText>

									<h:outputText value="Descripción: " style="font-weight: bold" />
									<h:outputText value="#{item.itemDescripcion}" />

									<h:outputText value="Fecha Inicio: " style="font-weight: bold" />
									<h:outputText value="#{item.itemFechaSubastaInicio}">
										<f:convertDateTime pattern="yyyy/MM/dd HH:mm" />
									</h:outputText>
									<h:outputText value="Fecha Final: " style="font-weight: bold" />
									<h:outputText value="#{item.itemFechaSubastaFin}">
										<f:convertDateTime pattern="yyyy/MM/dd HH:mm" />
									</h:outputText>
								</h:panelGrid>
							</p:outputPanel>

							<p:outputPanel>
								<p:commandLink update=":frm:detalleproser"
									value="Ver Información" oncomplete="PF('veritem').show()"
									title="Informacion">
									<h:outputText styleClass="ui-icon ui-icon-search"
										style="margin:0 auto;" />
									<f:setPropertyActionListener value="#{item}"
										target="#{ofertausuBean.item}" />
								</p:commandLink>
							</p:outputPanel>
						</h:panelGrid>
					</p:dataScroller>
				</p:layoutUnit>
			</p:layout>
			<p:dialog header="Informaci&oacute;n del Item" widgetVar="veritem"
				modal="true" showEffect="fade" hideEffect="fade" resizable="false">
				<p:outputPanel id="detalleproser" style="text-align:center;">
					<p:panelGrid columns="2" columnClasses="label,value">
						<f:facet name="header">
							<p:graphicImage value="#{facesContex}/imgevent/300.jpg"
								width="150" height="150" />
						</f:facet>
						<h:outputText value="Nombre: " />
						<h:outputText value="#{ofertausuBean.item.itemNombre}" />
						<h:outputText value="Descripcion: " />
						<h:outputText value="#{ofertausuBean.item.itemDescripcion}" />
						<h:outputText value="Valor: " />
						<h:outputText value="$ #{ofertausuBean.item.itemValorBase}" />
						<h:outputText value="Fechas de Inicio: " />
						<h:outputText value="#{ofertausuBean.item.itemFechaSubastaInicio}">
							<f:convertDateTime pattern="yyyy/MM/dd HH:mm" />
						</h:outputText>
						<h:outputText value="Fechas de Final: " />
						<h:outputText value="#{ofertausuBean.item.itemFechaSubastaFin}">
							<f:convertDateTime pattern="yyyy/MM/dd HH:mm" />
						</h:outputText>
						<p:commandButton value="Comprar" styleClass="btn btn-default"
							disabled="false" action="#{ofertausuBean.irComprar()}"
							style="padding:7px;" update="frm messages">
						</p:commandButton>
						<p:commandButton value="Volver" styleClass="btn btn-default"
							style="padding:7px;" actionListener="home.xhtml"
							oncomplete="PF('veritem').hide();" update="frm messages">
						</p:commandButton>
					</p:panelGrid>
				</p:outputPanel>
			</p:dialog>
		</h:form>
	</ui:define>
</ui:composition>
</html>
