<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:b="http://bootsfaces.net/ui">

<ui:composition template="template.xhtml">
	<ui:define name="titulo">
            Subastas
        </ui:define>
	<ui:define name="contenido">
		<div class="ecuador-iso">
			<h:graphicImage id="bola" value="/resources/img/amalavida.png"></h:graphicImage>
		</div>
		<h:form>
			<div class="ui-grid-row">
				<div class="ui-grid-col-10" style="padding-left: 20%;">
					<center>
						<h1>SUBASTAS YACHAY</h1>
					</center>
				</div>
				<div class="ui-grid-col-2">
					<h:graphicImage id="logo" value="/resources/img/logoyachay.png"></h:graphicImage>
				</div>
			</div>

		</h:form>
		<br />
		<h:form id="frm">
			<p:growl id="messages" showDetail="false" />
			<p:layout style="min-height:600px;">
				<p:layoutUnit position="center" size="500">
					<p:dataScroller var="item" value="#{ofertausuindexBean.listaItems}"
						chunkSize="10"
						paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
						rowsPerPageTemplate="6,12,16">

						<f:facet name="loader">
							<p:commandButton type="button" value="Mas"
								icon="ui-icon-circle-triangle-s" />
						</f:facet>

						<h:panelGrid columns="3" style="width:100%"
							columnClasses="Imagen,detalle,ofertar">
							<p:graphicImage value="#{facesContex}/imgevent/300.jpg"
								width="150" height="150" />

							<p:outputPanel>
								<h:panelGrid columns="2" cellpadding="5">
									<h:outputText value="Nombre: " style="font-weight: bold" />
									<h:outputText value="#{item.itemNombre}"></h:outputText>

									<h:outputText value="Valor Base: " style="font-weight: bold" />
									<h:outputText value="#{item.itemValorBase}"></h:outputText>

									<h:outputText value="Descripción: " style="font-weight: bold" />
									<h:outputText value="#{item.itemDescripcion}" />

									<h:outputText value="Fecha Inicio: " style="font-weight: bold" />
									<h:outputText value="#{item.itemFechaSubastaInicio}">
										<f:convertDateTime pattern="yyyy/MM/dd HH:mm" />
									</h:outputText>
									<h:outputText value="Fecha Final: " style="font-weight: bold" />
									<h:outputText value="#{item.itemFechaSubastaFin}">
										<f:convertDateTime pattern="yyyy/MM/dd HH:mm" />
									</h:outputText>
								</h:panelGrid>
							</p:outputPanel>

							<p:outputPanel>
								<h:panelGrid columns="2" cellpadding="5">
									<p:commandLink update=":frm:detalleproser"
										value="Ver Información" oncomplete="PF('veritem').show()"
										title="Informacion">
										<h:outputText styleClass="ui-icon ui-icon-search"
											style="margin:0 auto;" />
										<f:setPropertyActionListener value="#{item}"
											target="#{ofertausuindexBean.item}" />
									</p:commandLink>
								</h:panelGrid>
							</p:outputPanel>
						</h:panelGrid>
					</p:dataScroller>
				</p:layoutUnit>
			</p:layout>
			<p:dialog header="Informaci&oacute;n del Item" widgetVar="veritem"
				modal="true" showEffect="fade" hideEffect="fade" resizable="false">
				<p:outputPanel id="detalleproser" style="text-align:center;">
					<p:panelGrid columns="2" columnClasses="label,value">
						<f:facet name="header">
							<p:graphicImage value="#{facesContex}/imgevent/300.jpg"
								width="150" height="150" />
						</f:facet>
						<h:outputText value="Nombre: " />
						<h:outputText value="#{ofertausuindexBean.item.itemNombre}" />
						<h:outputText value="Descripcion: " />
						<h:outputText value="#{ofertausuindexBean.item.itemDescripcion}" />
						<h:outputText value="Valor: " />
						<h:outputText value="$ #{ofertausuindexBean.item.itemValorVenta}" />
						<h:outputText value="Fechas de Inicio: " />
						<h:outputText
							value="#{ofertausuindexBean.item.itemFechaSubastaInicio}">
							<f:convertDateTime pattern="yyyy/MM/dd HH:mm" />
						</h:outputText>
						<h:outputText value="Fechas de Final: " />
						<h:outputText
							value="#{ofertausuindexBean.item.itemFechaSubastaFin}">
							<f:convertDateTime pattern="yyyy/MM/dd HH:mm" />
						</h:outputText>
						<p:commandButton value="Comprar" styleClass="btn btn-default"
							disabled="true" action="#{ofertausuindexBean.irComprar()}"
							style="padding:7px;" update="frm messages">
						</p:commandButton>
						<p:commandButton value="Volver" styleClass="btn btn-default"
							style="padding:7px;" actionListener="index.xhtml"
							oncomplete="PF('veritem').hide();" update="frm messages">
						</p:commandButton>
					</p:panelGrid>
				</p:outputPanel>
			</p:dialog>
		</h:form>
		<p:dialog header="Ingreso al Sistema de Subastas" widgetVar="ic"
			modal="true" showEffect="fade" hideEffect="fade" resizable="false">
			<div class="row topForm">
				<div class="col-sm-6 col-sm-offset-3 form-box">
					<div class="form-bottom">
						<h:form id="frmlog">
							<h:panelGrid columns="2" cellpadding="5">
								<b:row>
									<b:column>
										<p:inputText placeholder="USUARIO" styleClass="form-control"
											value="#{sessionBean.nick}">
											<p:ajax listener="#{sessionBean.veri()}" update=":frm"></p:ajax>
										</p:inputText>
									</b:column>
									<b:column>
										<b:inputSecret placeholder="CONTRASE&Ntilde;A"
											value="#{sessionBean.pass}">
										</b:inputSecret>
									</b:column>
									<b:column>
										<b:commandButton value="Ingresar" iconAwesome="check-square-o"
											action="#{sessionBean.login}" styleClass="btn-block btnSend"
											look="primary" update=":frm" />
									</b:column>
								</b:row>
							</h:panelGrid>
						</h:form>
					</div>
				</div>
			</div>
		</p:dialog>
	</ui:define>
</ui:composition>
</html>
