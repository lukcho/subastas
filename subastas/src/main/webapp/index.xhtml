<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:b="http://bootsfaces.net/ui">

<ui:composition template="template.xhtml">
	<ui:define name="titulo">
            Subastas
        </ui:define>
	<ui:define name="contenido">
		<h:form>
			<center>
				<h1>SUBASTAS YACHAY</h1>
			</center>
		</h:form>
		<br />
		<h:form id="frm">
			<p:growl id="messages" showDetail="false" />
			<p:layout style="min-height:600px;">
				<p:layoutUnit position="center" size="500">
					<p:dataGrid var="item" value="#{ofertausuBean.listaItems}"
						columns="3" layout="grid" rows="12" paginator="true" id="cars"
						paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
						rowsPerPageTemplate="6,12,16">

						<p:panel header="#{item.itemNombre}" style="text-align:center">
							<h:panelGrid columns="1" style="width:100%">
								<p:graphicImage value="#{facesContex}/imgevent/300.jpg"
									width="150" height="150" />
								<h:outputText value="$ #{item.itemValorVenta}" />
								<h:outputText value="#{item.itemDescripcion}" />
								<h:outputText value="#{item.itemCaracteristicas}" />
								<h:outputText
									value="#{item.itemFechaSubastaInicio} #{item.itemFechaSubastaFin}">
									<f:convertDateTime pattern="yyyy/MM/dd HH:mm" />
								</h:outputText>
								<p:commandLink update=":frm:detalleproser"
									oncomplete="PF('veritem').show()" title="Informacion">
									<h:outputText styleClass="ui-icon ui-icon-search"
										style="margin:0 auto;" />
									<f:setPropertyActionListener value="#{item}"
										target="#{ofertausuBean.item}" />
								</p:commandLink>
							</h:panelGrid>
						</p:panel>
					</p:dataGrid>
				</p:layoutUnit>
				<p:layoutUnit position="east" size="300" header="Ingreso al Sistema"
					resizable="true" closable="true" collapsible="true" effect="drop">
							<div class="row topForm">
								<div class="col-sm-6 col-sm-offset-3 form-box">
									<div class="form-top">
										<div class="form-top-right">
											<i class="fa fa-gavel fa-3x"></i>
										</div>
									</div>
									<div class="form-bottom">
										<h:form id="frmlog">
											<div class="form-group">
												<p:inputText placeholder="USUARIO" styleClass="form-control" 
													value="#{sessionBean.nick}">
													<p:ajax listener="#{sessionBean.veri()}" update=":frm"></p:ajax>
												</p:inputText>
											</div>
											<div class="form-group">
												<b:inputSecret placeholder="CONTRASE&Ntilde;A"
													value="#{sessionBean.pass}">
												</b:inputSecret>
											</div>
											<b:commandButton value="Ingresar"
												iconAwesome="check-square-o" action="#{sessionBean.login}"
												styleClass="btn-block btnSend" look="primary"
												update=":frm" />
										</h:form>
									</div>
								</div>
							</div>
				</p:layoutUnit>
			</p:layout>
			<p:dialog header="Informaci&oacute;n del Item" widgetVar="veritem"
				modal="true" showEffect="fade" hideEffect="fade" resizable="false">
				<p:outputPanel id="detalleproser" style="text-align:center;">
					<p:panelGrid columns="2" columnClasses="label,value">
						<f:facet name="header">
							<p:graphicImage value="#{facesContex}/imgevent/300.jpg"
								width="150" height="150" />
						</f:facet>
						<h:outputText value="Nombre: " />
						<h:outputText value="#{ofertausuBean.item.itemNombre}" />
						<h:outputText value="Descripcion: " />
						<h:outputText value="#{ofertausuBean.item.itemDescripcion}" />
						<h:outputText value="Valor: " />
						<h:outputText value="$ #{ofertausuBean.item.itemValorVenta}" />
						<h:outputText value="Fechas de Inicio: " />
						<h:outputText value="#{ofertausuBean.item.itemFechaSubastaInicio}">
							<f:convertDateTime pattern="yyyy/MM/dd HH:mm" />
						</h:outputText>
						<h:outputText value="Fechas de Final: " />
						<h:outputText value="#{ofertausuBean.item.itemFechaSubastaFin}">
							<f:convertDateTime pattern="yyyy/MM/dd HH:mm" />
						</h:outputText>
						<p:commandButton value="Comprar" styleClass="btn btn-default"
							disabled="true" action="#{ofertausuBean.irComprar()}"
							style="padding:7px;" update="frm messages">
						</p:commandButton>
						<p:commandButton value="Volver" styleClass="btn btn-default"
							style="padding:7px;" actionListener="index.xhtml" oncomplete="PF('veritem').hide();"
							update="frm messages">
						</p:commandButton>
					</p:panelGrid>
				</p:outputPanel>
			</p:dialog>
		</h:form>
	</ui:define>
</ui:composition>
</html>
